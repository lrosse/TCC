<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Sistema de Gest칚o{% endblock %}</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #f5f5f5;
    }

    /* Sidebar (desktop) */
    .sidebar {
      position: fixed;
      top: 56px;
      bottom: 0;
      left: 0;
      z-index: 100;
      width: 220px;
      background-color: #2c3e50;
      border-right: 1px solid #34495e;
      padding: 0;
      overflow-y: auto;
    }

    .sidebar .nav-link {
      color: #bdc3c7;
      border-radius: 0;
      padding: .45rem 1rem;
      font-size: 0.9rem;
      transition: all 0.2s ease-in-out;
      border-left: 3px solid transparent;
    }

    .sidebar .nav-link i {
      margin-right: 10px;
      font-size: 1rem;
      width: 18px;
      text-align: center;
    }

    .sidebar .nav-link:hover {
      background: #34495e;
      color: #ecf0f1;
      border-left-color: #3498db;
    }

    .sidebar .nav-link.active {
      background: #34495e;
      font-weight: 500;
      color: #3498db;
      border-left-color: #3498db;
    }

    .sidebar h6 {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1rem;
      margin: 1rem 1rem .25rem;
      color: #7f8c8d;
      font-weight: 600;
    }

    /* Conte칰do */
    .main-content {
      margin-top: 56px;
      padding: 2rem;
    }

    @media (min-width: 768px) {
      .main-content {
        margin-left: 220px;
      }
    }

    /* Avatar perfil */
    .perfil-avatar {
      width: 36px;
      height: 36px;
      background: #3498db;
      color: #fff;
      border-radius: 50%;
      font-weight: 600;
      font-size: .9rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    /* Navbar */
    .navbar {
      background-color: #34495e !important;
      border-bottom: 1px solid #2c3e50;
    }

    .navbar-brand {
      color: #ecf0f1 !important;
      font-weight: 600;
    }

    .navbar-brand:hover {
      color: #3498db !important;
    }

    /* Dropdown perfil */
    .navbar-profile .dropdown-menu {
      background-color: #2c3e50;
      border: 1px solid #34495e;
    }

    .navbar-profile .dropdown-menu .dropdown-item {
      color: #ecf0f1;
    }

    .navbar-profile .dropdown-menu .dropdown-item:hover {
      background-color: #34495e;
      color: #fff;
    }

    .navbar-profile .dropdown-divider {
      border-color: #34495e;
    }

    .navbar-profile .dropdown-menu .text-muted {
      color: #bdc3c7 !important;
    }

    /* Retira o caret autom치tico */
    .dropdown-toggle::after {
      display: none;
    }

    /* Submenu recuado */
    .sidebar .collapse .nav-link,
    .offcanvas-body .collapse .nav-link {
      padding-left: 2rem;
      font-size: 0.88rem;
    }

    /* Offcanvas */
    .offcanvas {
      background-color: #2c3e50;
    }

    .offcanvas .nav-link {
      color: #bdc3c7;
    }

    .offcanvas .nav-link:hover {
      background: #34495e;
      color: #ecf0f1;
      border-left: 3px solid #3498db;
    }
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body>
  <!-- 游댳 Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light shadow-sm fixed-top">
    <div class="container-fluid">
      <!-- Bot칚o hamburguer (mobile) -->
      <button class="btn btn-outline-light d-md-none me-2" type="button" data-bs-toggle="offcanvas"
        data-bs-target="#sidebarOffcanvas">
        <i class="bi bi-list"></i>
      </button>

      <a class="navbar-brand fw-semibold" href="{% url 'dashboard' %}">Painel</a>

      <div class="d-flex align-items-center ms-auto">
        <!-- Perfil -->
        <div class="dropdown navbar-profile position-relative">
          <button class="btn p-0 border-0 bg-transparent d-flex align-items-center dropdown-toggle" type="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            <div class="perfil-avatar">
              {% if request.user.is_authenticated %}
              {{ request.user.username|first|upper }}
              {% else %}
              <i class="bi bi-person"></i>
              {% endif %}
            </div>
            <i class="bi bi-caret-down-fill ms-2 small text-muted"></i>
          </button>

          <ul class="dropdown-menu dropdown-menu-end shadow-sm mt-2">
            {% if request.user.is_authenticated %}
            <li class="px-3 py-2 text-muted small">
              Ol치, <strong>{{ request.user.username }}</strong>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="{% url 'home' %}"><i class="bi bi-shop me-2"></i> Loja</a></li>
            <li><a class="dropdown-item text-danger" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right me-2"></i> Sair</a></li>
            {% else %}
            <li><a class="dropdown-item" href="{% url 'login' %}"><i class="bi bi-box-arrow-in-right me-2"></i> Entrar</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Sidebar Desktop -->
  <nav class="sidebar d-none d-md-block">
    <div class="py-2">
      <h6>Navega칞칚o</h6>
      <ul class="nav flex-column">
        <li class="nav-item"><a href="{% url 'dashboard' %}" class="nav-link"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
      </ul>

      <!-- Produtos -->
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link d-flex justify-content-between align-items-center" data-bs-toggle="collapse"
            href="#menuProdutos" role="button" aria-expanded="false" aria-controls="menuProdutos">
            <span><i class="bi bi-box-seam me-2"></i> Produtos</span>
            <i class="bi bi-chevron-down small"></i>
          </a>
          <div class="collapse" id="menuProdutos">
            <ul class="nav flex-column">
              <li class="nav-item"><a href="{% url 'listar_produtos' %}" class="nav-link">Lista</a></li>
              <li class="nav-item"><a href="{% url 'criar_produto' %}" class="nav-link">Cadastro</a></li>
              <li class="nav-item"><a href="{% url 'ajuste_estoque' %}" class="nav-link">Ajuste Manual de Estoque</a></li>
              <li class="nav-item"><a href="{% url 'historico_estoque' %}" class="nav-link">Hist칩rico de Estoque</a></li>
            </ul>
          </div>
        </li>
      </ul>

      <!-- Pedidos -->
      <ul class="nav flex-column">
        <li class="nav-item"><a href="{% url 'pedidos' %}" class="nav-link"><i class="bi bi-basket"></i> Pedidos</a></li>
      </ul>

      <!-- Relat칩rios -->
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link d-flex justify-content-between align-items-center" data-bs-toggle="collapse"
            href="#menuRelatorios" role="button" aria-expanded="false" aria-controls="menuRelatorios">
            <span><i class="bi bi-graph-up me-2"></i> Relat칩rios</span>
            <i class="bi bi-chevron-down small"></i>
          </a>
          <div class="collapse" id="menuRelatorios">
            <ul class="nav flex-column">
              <li class="nav-item"><a href="{% url 'relatorios' %}" class="nav-link">Vis칚o Geral</a></li>
              <li class="nav-item"><a href="{% url 'relatorio_financeiro' %}" class="nav-link">Financeiro</a></li>
            </ul>
          </div>
        </li>
      </ul>

      <!-- Gest칚o -->
      <ul class="nav flex-column mb-4">
        <li class="nav-item"><a href="{% url 'listar_feedbacks' %}" class="nav-link"><i class="bi bi-chat-dots"></i> Feedbacks</a></li>
        <li class="nav-item"><a href="{% url 'gestao_index' %}" class="nav-link"><i class="bi bi-gear"></i> Gest칚o</a></li>
      </ul>
    </div>
  </nav>

  <!-- Sidebar Mobile (Offcanvas) -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarOffcanvas">
    <div class="offcanvas-header border-bottom">
      <h5 class="offcanvas-title text-white">Menu</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">
      <ul class="nav flex-column">
        <li class="nav-item"><a href="{% url 'dashboard' %}" class="nav-link"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
      </ul>

      <!-- Produtos (dropdown no mobile) -->
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link d-flex justify-content-between align-items-center" data-bs-toggle="collapse"
            href="#menuProdutosMobile" role="button" aria-expanded="false" aria-controls="menuProdutosMobile">
            <span><i class="bi bi-box-seam me-2"></i> Produtos</span>
            <i class="bi bi-chevron-down small"></i>
          </a>
          <div class="collapse" id="menuProdutosMobile">
            <ul class="nav flex-column">
              <li class="nav-item"><a href="{% url 'listar_produtos' %}" class="nav-link">Lista</a></li>
              <li class="nav-item"><a href="{% url 'criar_produto' %}" class="nav-link">Cadastro</a></li>
              <li class="nav-item"><a href="{% url 'ajuste_estoque' %}" class="nav-link">Ajuste Manual de Estoque</a></li>
              <li class="nav-item"><a href="{% url 'historico_estoque' %}" class="nav-link">Hist칩rico de Estoque</a></li>
            </ul>
          </div>
        </li>
      </ul>

      <!-- Pedidos -->
      <ul class="nav flex-column">
        <li class="nav-item"><a href="{% url 'pedidos' %}" class="nav-link"><i class="bi bi-basket"></i> Pedidos</a></li>
      </ul>

      <!-- Relat칩rios (dropdown no mobile) -->
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link d-flex justify-content-between align-items-center" data-bs-toggle="collapse"
            href="#menuRelatoriosMobile" role="button" aria-expanded="false" aria-controls="menuRelatoriosMobile">
            <span><i class="bi bi-graph-up me-2"></i> Relat칩rios</span>
            <i class="bi bi-chevron-down small"></i>
          </a>
          <div class="collapse" id="menuRelatoriosMobile">
            <ul class="nav flex-column">
              <li class="nav-item"><a href="{% url 'relatorios' %}" class="nav-link">Vis칚o Geral</a></li>
              <li class="nav-item"><a href="{% url 'relatorio_financeiro' %}" class="nav-link">Financeiro</a></li>
            </ul>
          </div>
        </li>
      </ul>

      <!-- Gest칚o -->
      <ul class="nav flex-column mb-4">
        <li class="nav-item"><a href="{% url 'listar_feedbacks' %}" class="nav-link"><i class="bi bi-chat-dots"></i> Feedbacks</a></li>
        <li class="nav-item"><a href="{% url 'gestao_index' %}" class="nav-link"><i class="bi bi-gear"></i> Gest칚o</a></li>
      </ul>
    </div>
  </div>

  <!-- Conte칰do -->
  <main class="main-content">
    {% block content %}{% endblock %}
  </main>

  <!-- Bootstrap Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  {% block extra_js %}{% endblock %}
</body>
</html>
